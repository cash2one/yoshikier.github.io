<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>拍卖流程</title>
    <link rel="stylesheet" href="css/process.css">
  </head>
  <body>
    <div class="process-content">
      <svg id="shape1" version="1.1" id="图层_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="700px" height="1000px" viewBox="0 0 700 1000" enable-background="new 0 0 700 1000" xml:space="preserve">
        <g id="形状_1_1_" enable-background="new    ">
          <path fill="#DEDEDE" stroke="#FFFFFF" stroke-miterlimit="1" d="M331.278-59.752"/>
          <linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1="299.6665" y1="699" x2="299.6666" y2="699">
            <stop  offset="0" style="stop-color:#FFFFFF"/>
            <stop  offset="1" style="stop-color:#040000"/>
          </linearGradient>
          <path fill="none" stroke="url(#SVGID_1_)" stroke-miterlimit="1" d="M542.795,201.623"/>
          <linearGradient id="SVGID_2_" gradientUnits="userSpaceOnUse" x1="297.6665" y1="700.667" x2="297.6666" y2="700.667">
            <stop  offset="0" style="stop-color:#FFFFFF"/>
            <stop  offset="1" style="stop-color:#040000"/>
          </linearGradient>
          <path fill="none" stroke="url(#SVGID_2_)" stroke-miterlimit="1" d="M537.326,196.669"/>
          <linearGradient id="SVGID_3_" gradientUnits="userSpaceOnUse" x1="105.5" y1="603.5" x2="352.815" y2="603.5">
            <stop  offset="0" style="stop-color:#FFFFFF"/>
            <stop  offset="1" style="stop-color:#040000"/>
          </linearGradient>
          <polyline fill="none" stroke="url(#SVGID_3_)" stroke-miterlimit="1" points="13.462,-28.572 13.462,314.391 242.193,314.391 
            345.491,424.538 345.491,629.964 403.693,568.19 403.693,417.542 505.084,309.146 686.537,309.146 686.537,988.371  "/>
        </g>
      </svg>

      <svg id="shape2" style="display: block; opacity: 0;" version="1.1" id="图层_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="700px" height="1000px" viewBox="0 0 700 1000" enable-background="new 0 0 700 1000" xml:space="preserve">
        <g id="_x32__1_">
          <path fill="#DEDEDE" stroke="#040000" stroke-width="2" stroke-miterlimit="10" d="M-69.782-236.792"/>
          <path fill="#DEDEDE" stroke="#040000" stroke-miterlimit="10" d="M-113.492-267.245"/>
          <path fill="none" stroke="#FFFFFF" stroke-miterlimit="10" d="M-4.224-389.051"/>
          <path fill="none" stroke="#040000" stroke-miterlimit="10" d="M690.738-389.051"/>
          <path fill="none" stroke="#040000" stroke-miterlimit="10" d="M-28.805-389.051"/>
          <polyline fill="none" stroke="#040000" stroke-miterlimit="10" points="686.909,2.132 686.909,388.63 411.007,388.63 
            411.007,101.685 255.296,101.685 255.296,400.344 315.396,400.344 315.396,358.181 383.686,358.181 383.686,400.344 
            411.007,400.344 411.007,426.109 285.348,426.109 270.326,438.994 400.075,438.994 400.075,477.642 14.086,477.642 14.086,1000  
            "/>
        </g>
      </svg>


      <svg id="shape3" style="display: block; opacity: 0;" version="1.1" id="图层_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="700px" height="1000px" viewBox="0 0 700 1000" enable-background="new 0 0 700 1000" xml:space="preserve">
        <g id="形状_12_1_" enable-background="new    ">
          <polyline fill="none" stroke="#040000" stroke-width="4" stroke-miterlimit="10" points="15.393,0 15.393,345.033 261.378,345.033 
            261.378,209.418 138.385,209.418 138.385,428.012 677.146,428.012 677.146,318.607 418.86,318.607 418.86,401.592 513.242,401.592 
            513.242,195.008 411.107,195.008 411.107,295.459 575.005,295.459 575.005,84.943 687.573,84.943 687.573,165.96 546.669,165.96 
            546.669,84.943 459.238,84.943 459.238,169.675 122.612,169.675 122.612,80.142 344.267,80.142 344.267,528.469 687.573,528.469 
            687.573,1003  "/>
        </g>
      </svg>

      <svg id="shape4" style="display: block; opacity: 0;" version="1.1" id="图层_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="700px" height="1000px" viewBox="0 0 700 1000" enable-background="new 0 0 700 1000" xml:space="preserve">
        <g id="图层_0_拷贝_xA0_图像_1_">
          <path fill="none" stroke="#040000" stroke-width="4" stroke-miterlimit="10" d="M686.984,0"/>
          <polyline fill="none" stroke="#040000" stroke-width="4" stroke-miterlimit="10" points="686.984,0 686.984,452.366 
            452.002,452.366 275.762,291.245 15.603,528.61 15.603,986.061 509.072,986.061 509.072,538.779 260.659,767.511 49.175,569.273   
            "/>
        </g>
      </svg>

      <div id="pn-1" class="p-num p-num-1">1</div>
      <div id="pn-2" class="p-num p-num-2" style="opacity:0;">2</div>
      <div id="pn-3" class="p-num p-num-3" style="opacity:0;">3</div>
      <div id="pn-4" class="p-num p-num-4" style="opacity:0;">4</div>

      <div class="tiper tiper1">
        <h1>浏览拍卖品</h1>
      </div>
      <div class="tiper tiper2" style="opacity:0;">
        <h1>出价竞拍</h1>
        <p>支付竞拍价格并填写个人信息，出价高者领先，价低者可再次出价，若放弃竞价，则支付款项在拍卖结束后原路退回</p>
      </div>
      <div class="tiper tiper3" style="opacity:0;">
        <h1>竞拍成功</h1>
        <p>如果在拍卖结束时，</p>
        <p>您的出价排在第一位</p>
        <p>则竞拍成功，获得商品</p>
      </div>
      <div class="tiper tiper4" style="opacity:0;">
        <h1>等待收货</h1>
      </div>
      <a href="#" class="next-btn" style="opacity: 0;">点击进入</a>
    </div>
    <script src="js/jquery-2.1.3.min.js"></script>
    <script src="js/walkway.js"></script>

    <script>

      document.addEventListener('DOMContentLoaded', function() {
        var tag1 = 1;
        var tag2 = 1;
        var top1 = $("#shape1").offset().top;
        var top2 = $("#shape2").offset().top;
        var top3 = $("#shape3").offset().top;
        var top4 = $("#shape4").offset().top;

        var svg1 = new Walkway({
          selector: '#shape1',
          duration: 1500,
          easing: 'linear'
        }).draw(function() {
          $("#pn-2").css("opacity", "1");
          $(".tiper2").css("opacity", "1");
          $("#shape2").css("opacity", 1);
          var svg2 = new Walkway({
            selector: '#shape2',
            duration: 1500,
            easing: 'linear'
          }).draw(function() {
            $("#pn-3").css("opacity", "1");
            $(".tiper3").css("opacity", "1");
            if (top3 - $(window).scrollTop() < 1400) {
              if (tag1) {
                  $("#shape3").css("opacity", 1);
                  var svg3 = new Walkway({
                    selector: '#shape3',
                    duration: 1500,
                    easing: 'linear'
                  }).draw(function() {
                    $("#pn-4").css("opacity", "1");
                    $(".tiper4").css("opacity", "1");
                    if (top4 - $(window).scrollTop() < 1200) {
                      if (tag2) {
                        $("#shape4").css("opacity", 1);
                        var svg4 = new Walkway({
                          selector: '#shape4',
                          duration: 1500,
                          easing: 'linear'
                        }).draw(function() { 
                          $('.next-btn').css("opacity", "1");
                        });
                        tag2 = 0;
                      };
                    };
                    $(window).scroll(function(){
                      if (top4 - $(window).scrollTop() < 1200) {
                        if (tag2) {
                          $("#shape4").css("opacity", 1);
                          var svg4 = new Walkway({
                            selector: '#shape4',
                            duration: 1500,
                            easing: 'linear'
                          }).draw(function() { 
                            console.log('动画完毕！');
                          });
                          tag2 = 0;
                        };
                      };
                    });  
                  });
                  tag1 = 0;
                };
            };
            $(window).scroll(function(){
              if( top3 - $(window).scrollTop() < 1400) {
                if (tag1) {
                  $("#shape3").css("opacity", 1);
                  var svg3 = new Walkway({
                    selector: '#shape3',
                    duration: 1500,
                    easing: 'linear'
                  }).draw(function() {
                    $("#pn-4").css("opacity", "1");
                    $(".tiper4").css("opacity", "1");
                    $(window).scroll(function(){
                      if (top4 - $(window).scrollTop() < 1200) {
                        if (tag2) {
                          $("#shape4").css("opacity", 1);
                          var svg4 = new Walkway({
                            selector: '#shape4',
                            duration: 1500,
                            easing: 'linear'
                          }).draw(function() { 
                            $('.next-btn').css("opacity", "1");
                          });
                          tag2 = 0;
                        };
                      };
                    });  
                  });
                  tag1 = 0;
                };
              };
            });
          });
        });     
      });
    
    </script>
  </body>
</html>